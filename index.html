<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff">
  <meta name="color-scheme" content="light">
  <title>PDF → сайт с кликабельными зонами</title>
  <style>
    :root { --bg:#0b0c0e; --fg:#fff; --accent:#14d368; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif}
    .app{max-width:960px;margin:0 auto;padding:16px}
    .page{position:relative;width:100%;box-shadow:0 10px 30px rgba(0,0,0,.35);border-radius:16px;overflow:hidden;background:#111}
    .page img.bg{display:block;width:100%;height:auto;user-select:none;pointer-events:none}
    .hotspot{position:absolute;display:block;outline:none;border:none;text-decoration:none}
  
    /* --- iOS Telegram hard white background fix --- */
    :root { --bg:#ffffff !important; }
    html, body {
      margin:0; padding:0;
      min-height:100vh;
      background:#ffffff !important;
      color-scheme: only light;
    }
    /* Белый слой на весь экран с учётом safe-area */
    .tg-white-wrap {
      position:fixed;
      inset:0;
      background:#ffffff !important;
      padding-top:env(safe-area-inset-top);
      padding-bottom:env(safe-area-inset-bottom);
      padding-left:env(safe-area-inset-left);
      padding-right:env(safe-area-inset-right);
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }
    /* Переносим нашу .app внутрь и гарантируем белый фон */
    .tg-white-wrap .app {
      background:#ffffff !important;
      position:relative;
      z-index:1;
      margin:0 auto;
      max-width:960px;
      padding:16px;
    }
    /* На iOS убираем скругления/тени, чтобы не просвечивал системный фон */
    [data-ios="1"] .page {
      border-radius:0 !important;
      box-shadow:none !important;
      background:#ffffff !important;
    }

  </style>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="tg-white-wrap">
    <div class="app">
      <div id="page" class="page" aria-live="polite"></div>
    </div>
  </div>

  <script>

    // Telegram Mini App iOS white background enforcement
    (function(){
      function isIOS(){
        return /iPad|iPhone|iPod/i.test(navigator.userAgent) || (window.Telegram && Telegram.WebApp && Telegram.WebApp.platform === 'ios');
      }
      function init(){
        try {
          if (window.Telegram && Telegram.WebApp) {
            Telegram.WebApp.ready();
            // Пытаемся и токеном темы, и чистым белым — разные клиенты ведут себя по-разному
            try { Telegram.WebApp.setBackgroundColor('bg_color'); } catch(e){}
            try { Telegram.WebApp.setBackgroundColor('#ffffff'); } catch(e){}
            try { Telegram.WebApp.setHeaderColor('bg_color'); } catch(e){}
            try { Telegram.WebApp.setHeaderColor('#ffffff'); } catch(e){}
            Telegram.WebApp.expand();
          }
        } catch(e){}
        if (isIOS()) {
          document.documentElement.setAttribute('data-ios', '1');
          // Дополнительно фиксируем белый фон прямо инлайном
          document.documentElement.style.background = '#ffffff';
          document.body.style.background = '#ffffff';
        }
      }
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();

    const PAGES = [
      {
        img: 'page-1.jpg',
        links: [
          { x: 41.98, y: 0.78, w: 45.05, h: 0.38, href: 'https://login.mos.ru/sps/login/mus?bo=%2Fsps%2Foauth%2Fae%3Fprompt%3Dlogin%26scope%3Dopenid%2Bprofile%2Bcontacts%2Busr_grps%26state%3D9dd8273c61c2c4c1f841e069fead41e2%26response_type%3Dcode%26approval_prompt%3Dauto%26redirect_uri%3Dhttps%3A%2F%2Fdelo.mos.ru%252Fauth%252Fmosru%252Fcheck%26client_id%3Ddelo.mos.ru', title: 'Войти в личный кабинет' },
          { x: 12.84, y: 10.97, w: 27.11, h: 0.48, href: 'https://delo.mos.ru/catalog', title: '58 мер поддержки' },
          { x: 57.48, y: 10.43, w: 34.78, h: 0.48, href: 'https://delo.mos.ru/events', title: '23 мероприятия для бизнеса' },
          { x: 43.24, y: 13.28, w: 38.3, h: 0.48, href: 'https://delo.mos.ru/business-analytics', title: '4 бизнес-сервиса' },
          { x: 19.88, y: 15.47, w: 60.25, h: 0.86, href: 'https://delo.mos.ru/catalog', title: 'подобрать меру для себя' },
          { x: 42.3, y: 22.75, w: 18.39, h: 0.51, href: 'https://chatgpt.com/?model=gpt-5', title: 'новый чат с нейро' },
          { x: 12.8, y: 34.36, w: 22.69, h: 0.75, href: 'https://delo.mos.ru/news', title: 'Итоги года...' },
          { x: 31.48, y: 42.93, w: 37.02, h: 0.43, href: 'https://delo.mos.ru/events', title: 'Все мероприятия' }
        ]
      }
    ];

    const pageEl = document.getElementById('page');

    function render() {
      const page = PAGES[0];
      pageEl.innerHTML = '';
      const img = document.createElement('img');
      img.alt = 'Страница';
      img.src = page.img;
      img.className = 'bg';
      pageEl.appendChild(img);

      if (Array.isArray(page.links)) {
        page.links.forEach(link => {
          if (link.w <= 0 || link.h <= 0) return;
          const a = document.createElement('a');
          a.href = link.href || '#';
          a.target = /^(mailto:|tel:|#)/.test(link.href || '#') ? '_self' : '_blank';
          a.rel = 'noopener';
          a.className = 'hotspot';
          a.setAttribute('aria-label', link.title || 'Ссылка');
          a.title = link.title || '';
          a.style.left = link.x + '%';
          a.style.top = link.y + '%';
          a.style.width = link.w + '%';
          a.style.height = link.h + '%';
          pageEl.appendChild(a);
        });
      }
    }

    render();
  </script>
</body>
</html>
